<div class="h-full p-4" style="position: relative; z-index: 1001; pointer-events: auto !important;">
    <!-- Logo/Brand -->
    <div class="flex items-center gap-3 mb-8 pb-6 border-b border-white/20">
        <div class="w-12 h-12 bg-gradient-to-br from-blue-400 via-blue-500 to-blue-600 rounded-xl flex items-center justify-center shadow-xl ring-2 ring-white/30">
            <svg class="w-7 h-7 text-white" fill="none" stroke="currentColor" stroke-width="3" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" d="M3 13h8V3H3v10zm0 8h8v-6H3v6zm10 0h8V11h-8v10zm0-18v6h8V3h-8z"/>
            </svg>
        </div>
        <div>
            <h1 class="text-xl font-bold text-white tracking-tight">Billing</h1>
            <p class="text-xs text-blue-100 font-medium">Management System</p>
        </div>
    </div>

    <!-- Dashboard Link -->
    <div class="mb-6">
        <a class="flex items-center gap-3 px-4 py-3 rounded-xl transition-all duration-200 <%= (typeof currentPath !== 'undefined' ? currentPath === '/' : true) ? 'bg-white/20 text-white shadow-lg ring-2 ring-white/30' : 'hover:bg-white/15 text-white hover:text-white' %>" href="/">
            <div class="w-9 h-9 bg-white/20 rounded-xl flex items-center justify-center ring-1 ring-white/30">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-white" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"><path d="M3 12l9-9 9 9"/><path d="M9 21V9h6v12"/></svg>
            </div>
            <span class="text-sm font-semibold text-white">Dashboard</span>
        </a>
    </div>

    <!-- Navigation Menu -->
    <nav class="space-y-1" style="position: relative; z-index: 1002; pointer-events: auto !important;">
        <!-- Pelanggan Section -->
        <div class="menu-group">
            <button type="button" class="menu-toggle w-full flex items-center justify-between px-4 py-3 rounded-xl text-white hover:bg-white/15 transition-all duration-200 group" data-menu="customers" style="pointer-events: auto !important; cursor: pointer !important;">
                <div class="flex items-center gap-3">
                    <div class="w-9 h-9 bg-gradient-to-br from-blue-400 to-cyan-500 rounded-xl flex items-center justify-center shadow-lg ring-1 ring-white/30 group-hover:scale-110 transition-transform">
                        <svg class="w-5 h-5 text-white" fill="none" stroke="currentColor" stroke-width="3" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
                            <circle cx="9" cy="7" r="4"></circle>
                            <path d="M23 21v-2a4 4 0 0 0-3-3.87"></path>
                            <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
                        </svg>
                    </div>
                    <span class="text-sm font-semibold text-white">Pelanggan</span>
                </div>
                <svg class="w-5 h-5 text-white transition-transform duration-200" id="customers-arrow" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M6 9l6 6 6-6"/>
                </svg>
            </button>
            <div class="menu-content hidden ml-4 mt-2 space-y-1" id="customers-menu" style="display: none; pointer-events: auto !important; z-index: 1004 !important;">
                <a class="flex items-center gap-3 px-3 py-2.5 rounded-lg text-white hover:bg-white/15 transition-all duration-200 <%= (typeof currentPath !== 'undefined' && (currentPath.startsWith('/customers/list') || currentPath.startsWith('/customers') && !currentPath.includes('new-'))) ? 'bg-white/20 text-white shadow-md' : '' %>" href="/customers/list">
                    <svg class="w-4 h-4 text-white" fill="none" stroke="currentColor" stroke-width="3" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M9 12h6m-6 4h6m2 5H7a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5.586a1 1 0 0 1 .707.293l5.414 5.414a1 1 0 0 1 .293.707V19a2 2 0 0 1-2 2z"></path>
                    </svg>
                    <span class="text-sm font-medium">Data Pelanggan</span>
                </a>
                <a class="flex items-center gap-3 px-3 py-2.5 rounded-lg text-white hover:bg-white/15 transition-all duration-200 <%= (typeof currentPath !== 'undefined' && currentPath.startsWith('/customers/new-pppoe')) ? 'bg-white/15 text-white' : '' %>" href="/customers/new-pppoe">
                    <svg class="w-4 h-4 text-white" fill="none" stroke="currentColor" stroke-width="2.5" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round"><path d="M9 5l7 7-7 7"></path></svg>
                    <span class="text-sm">Pelanggan PPPOE Baru</span>
                </a>
                <a class="flex items-center gap-3 px-3 py-2.5 rounded-lg text-white hover:bg-white/15 transition-all duration-200 <%= (typeof currentPath !== 'undefined' && currentPath.startsWith('/customers/new-static-ip')) ? 'bg-white/15 text-white' : '' %>" href="/customers/new-static-ip">
                    <svg class="w-4 h-4 text-white" fill="none" stroke="currentColor" stroke-width="2.5" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round"><path d="M9 5l7 7-7 7"></path></svg>
                    <span class="text-sm">Pelanggan IP Statis Baru</span>
                </a>
            </div>
        </div>

        <!-- Paket Internet Section -->
        <div class="menu-group">
            <button type="button" class="menu-toggle w-full flex items-center justify-between px-4 py-3 rounded-xl text-white hover:bg-white/15 transition-all duration-200 group" data-menu="packages" style="pointer-events: auto !important; cursor: pointer !important;">
                <div class="flex items-center gap-3">
                    <div class="w-9 h-9 bg-gradient-to-br from-green-400 to-emerald-500 rounded-xl flex items-center justify-center shadow-lg ring-1 ring-white/30 group-hover:scale-110 transition-transform">
                        <svg class="w-5 h-5 text-white" fill="none" stroke="currentColor" stroke-width="2.5" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M3 4a1 1 0 011-1h12a1 1 0 011 1v2a1 1 0 01-1 1H4a1 1 0 01-1-1V4zM3 10a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H4a1 1 0 01-1-1v-6zM14 9a1 1 0 00-1 1v6a1 1 0 001 1h2a1 1 0 001-1v-6a1 1 0 00-1-1h-2z"/>
                        </svg>
                    </div>
                    <span class="text-sm font-semibold text-white">Paket Internet</span>
                </div>
                <svg class="w-5 h-5 text-white transition-transform duration-200" id="packages-arrow" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
                    <path d="M6 9l6 6 6-6"/>
                </svg>
            </button>
            <div class="menu-content hidden ml-4 mt-2 space-y-1" id="packages-menu" style="display: none; pointer-events: auto !important; z-index: 1004 !important;">
                <a class="flex items-center gap-3 px-3 py-2.5 rounded-lg text-white hover:bg-white/15 transition-all duration-200 <%= (typeof currentPath !== 'undefined' && currentPath.startsWith('/packages/pppoe/packages')) ? 'bg-white/15 text-white' : '' %>" href="/packages/pppoe/packages">
                    <svg class="w-4 h-4 text-white" fill="none" stroke="currentColor" stroke-width="2.5" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round"><path d="M9 5l7 7-7 7"></path></svg>
                    <span class="text-sm">Paket PPPOE</span>
                </a>
                <a class="flex items-center gap-3 px-3 py-2.5 rounded-lg text-white hover:bg-white/15 transition-all duration-200 <%= (typeof currentPath !== 'undefined' && currentPath.startsWith('/packages/pppoe/profiles')) ? 'bg-white/15 text-white' : '' %>" href="/packages/pppoe/profiles">
                    <svg class="w-4 h-4 text-white" fill="none" stroke="currentColor" stroke-width="2.5" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round"><path d="M9 5l7 7-7 7"></path></svg>
                    <span class="text-sm">Profil PPPOE</span>
                </a>
                <a class="flex items-center gap-3 px-3 py-2.5 rounded-lg text-white hover:bg-white/15 transition-all duration-200 <%= (typeof currentPath !== 'undefined' && currentPath.startsWith('/packages/static-ip')) ? 'bg-white/15 text-white' : '' %>" href="/packages/static-ip">
                    <svg class="w-4 h-4 text-white" fill="none" stroke="currentColor" stroke-width="2.5" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round"><path d="M9 5l7 7-7 7"></path></svg>
                    <span class="text-sm">Paket IP Static</span>
                </a>
            </div>
        </div>




        <!-- FTTH Section -->
        <div class="menu-group">
            <button type="button" class="menu-toggle w-full flex items-center justify-between px-4 py-3 rounded-xl text-white hover:bg-white/15 transition-all duration-200 group" data-menu="ftth" style="pointer-events: auto !important; cursor: pointer !important;">
                <div class="flex items-center gap-3">
                    <div class="w-9 h-9 bg-gradient-to-br from-purple-400 to-pink-500 rounded-xl flex items-center justify-center shadow-lg ring-1 ring-white/30 group-hover:scale-110 transition-transform">
                        <svg class="w-5 h-5 text-white" fill="none" stroke="currentColor" stroke-width="2.5" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M2 3a1 1 0 011-1h2.153a1 1 0 01.986.836l.74 4.435a1 1 0 01-.54 1.06l-1.548.773a11.037 11.037 0 006.105 6.105l.774-1.548a1 1 0 011.059-.54l4.435.74a1 1 0 01.836.986V17a1 1 0 01-1 1h-2C7.82 18 2 12.18 2 5V3z"/>
                        </svg>
                    </div>
                    <span class="text-sm font-semibold text-white">FTTH</span>
                </div>
                <svg class="w-5 h-5 text-white transition-transform duration-200" id="ftth-arrow" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
                    <path d="M6 9l6 6 6-6"/>
                </svg>
            </button>
            <div class="menu-content hidden ml-4 mt-2 space-y-1" id="ftth-menu" style="display: none; pointer-events: auto !important; z-index: 1004 !important;">
                <a class="flex items-center gap-3 px-3 py-2.5 rounded-lg text-white hover:bg-white/15 transition-all duration-200 <%= (typeof currentPath !== 'undefined' && currentPath.startsWith('/ftth/olt')) ? 'bg-white/15 text-white' : '' %>" href="/ftth/olt">
                    <svg class="w-4 h-4 text-white" fill="none" stroke="currentColor" stroke-width="2.5" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round"><path d="M9 5l7 7-7 7"></path></svg>
                    <span class="text-sm">OLT</span>
                </a>
                <a class="flex items-center gap-3 px-3 py-2.5 rounded-lg text-white hover:bg-white/15 transition-all duration-200 <%= (typeof currentPath !== 'undefined' && currentPath.startsWith('/ftth/odc')) ? 'bg-white/15 text-white' : '' %>" href="/ftth/odc">
                    <svg class="w-4 h-4 text-white" fill="none" stroke="currentColor" stroke-width="2.5" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round"><path d="M9 5l7 7-7 7"></path></svg>
                    <span class="text-sm">ODC</span>
                </a>
                <a class="flex items-center gap-3 px-3 py-2.5 rounded-lg text-white hover:bg-white/15 transition-all duration-200 <%= (typeof currentPath !== 'undefined' && currentPath.startsWith('/ftth/odp')) ? 'bg-white/15 text-white' : '' %>" href="/ftth/odp">
                    <svg class="w-4 h-4 text-white" fill="none" stroke="currentColor" stroke-width="2.5" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round"><path d="M9 5l7 7-7 7"></path></svg>
                    <span class="text-sm">ODP</span>
                </a>
            </div>
        </div>


        <!-- Billing Section -->
        <div class="menu-group">
            <button type="button" class="menu-toggle w-full flex items-center justify-between px-4 py-3 rounded-xl text-white hover:bg-white/15 transition-all duration-200 group" data-menu="billing" style="pointer-events: auto !important; cursor: pointer !important;">
                <div class="flex items-center gap-3">
                    <div class="w-9 h-9 bg-gradient-to-br from-orange-400 to-red-500 rounded-xl flex items-center justify-center shadow-lg ring-1 ring-white/30 group-hover:scale-110 transition-transform">
                        <svg class="w-5 h-5 text-white" fill="none" stroke="currentColor" stroke-width="2.5" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M4 4a2 2 0 00-2 2v1h16V6a2 2 0 00-2-2H4zM18 9H2v5a2 2 0 002 2h12a2 2 0 002-2V9zM4 13a1 1 0 011-1h1a1 1 0 110 2H5a1 1 0 01-1-1zm5-1a1 1 0 100 2h1a1 1 0 100-2H9z"/>
                        </svg>
                    </div>
                    <span class="text-sm font-semibold text-white">Billing</span>
                </div>
                <svg class="w-5 h-5 text-white transition-transform duration-200" id="billing-arrow" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
                    <path d="M6 9l6 6 6-6"/>
                </svg>
            </button>
            <div class="menu-content hidden ml-4 mt-2 space-y-1" id="billing-menu" style="display: none; pointer-events: auto !important; z-index: 1004 !important;">
                <a class="flex items-center gap-3 px-3 py-2.5 rounded-lg text-white hover:bg-white/15 hover:text-white transition-all duration-200 <%= (typeof currentPath !== 'undefined' && currentPath === '/billing/dashboard') ? 'bg-white/15 text-white' : '' %>" href="/billing/dashboard">
                    <svg class="w-4 h-4 text-white" fill="none" stroke="currentColor" stroke-width="2.5" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round"><path d="M9 5l7 7-7 7"></path></svg>
                    <span class="text-sm">Dashboard Billing</span>
                </a>
                <a class="flex items-center gap-3 px-3 py-2.5 rounded-lg text-white hover:bg-white/15 hover:text-white transition-all duration-200 <%= (typeof currentPath !== 'undefined' && currentPath.startsWith('/billing/tagihan')) ? 'bg-white/15 text-white' : '' %>" href="/billing/tagihan">
                    <svg class="w-4 h-4 text-white" fill="none" stroke="currentColor" stroke-width="2.5" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round"><path d="M9 5l7 7-7 7"></path></svg>
                    <span class="text-sm">Daftar Tagihan</span>
                </a>
                <a class="flex items-center gap-3 px-3 py-2.5 rounded-lg text-white hover:bg-white/15 hover:text-white transition-all duration-200 <%= (typeof currentPath !== 'undefined' && currentPath.startsWith('/billing/subscriptions')) ? 'bg-white/15 text-white' : '' %>" href="/billing/subscriptions">
                    <svg class="w-4 h-4 text-white" fill="none" stroke="currentColor" stroke-width="2.5" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round"><path d="M9 5l7 7-7 7"></path></svg>
                    <span class="text-sm">Langganan</span>
                </a>
                <a class="flex items-center gap-3 px-3 py-2.5 rounded-lg text-white hover:bg-white/15 hover:text-white transition-all duration-200 <%= (typeof currentPath !== 'undefined' && currentPath.startsWith('/billing/payments/history')) ? 'bg-white/15 text-white' : '' %>" href="/billing/payments/history">
                    <svg class="w-4 h-4 text-white" fill="none" stroke="currentColor" stroke-width="2.5" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round"><path d="M9 5l7 7-7 7"></path></svg>
                    <span class="text-sm">Riwayat Pembayaran</span>
                </a>
                <a class="flex items-center gap-3 px-3 py-2.5 rounded-lg text-white hover:bg-white/15 hover:text-white transition-all duration-200 <%= (typeof currentPath !== 'undefined' && currentPath.startsWith('/billing/debts/view')) ? 'bg-white/15 text-white' : '' %>" href="/billing/debts/view">
                    <svg class="w-4 h-4 text-white" fill="none" stroke="currentColor" stroke-width="2.5" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round"><path d="M9 5l7 7-7 7"></path></svg>
                    <span class="text-sm">Pelacakan Hutang</span>
                </a>
                <a class="flex items-center gap-3 px-3 py-2.5 rounded-lg text-white hover:bg-white/15 hover:text-white transition-all duration-200 <%= (typeof currentPath !== 'undefined' && currentPath.startsWith('/billing/scheduler/settings')) ? 'bg-white/15 text-white' : '' %>" href="/billing/scheduler/settings">
                    <svg class="w-4 h-4 text-white" fill="none" stroke="currentColor" stroke-width="2.5" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round"><path d="M9 5l7 7-7 7"></path></svg>
                    <span class="text-sm">Pengaturan Scheduler</span>
                </a>
                <a class="flex items-center gap-3 px-3 py-2.5 rounded-lg text-white hover:bg-white/15 hover:text-white transition-all duration-200 <%= (typeof currentPath !== 'undefined' && currentPath.startsWith('/billing/reports')) ? 'bg-white/15 text-white' : '' %>" href="/billing/reports">
                    <svg class="w-4 h-4 text-white" fill="none" stroke="currentColor" stroke-width="2.5" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round"><path d="M9 5l7 7-7 7"></path></svg>
                    <span class="text-sm">Laporan</span>
                </a>
            </div>
        </div>

        <!-- Prepaid Section -->
        <div class="menu-group">
            <button type="button" class="menu-toggle w-full flex items-center justify-between px-4 py-3 rounded-xl text-white hover:bg-white/15 transition-all duration-200 group" data-menu="prepaid" style="pointer-events: auto !important; cursor: pointer !important;">
                <div class="flex items-center gap-3">
                    <div class="w-9 h-9 bg-gradient-to-br from-yellow-400 to-orange-500 rounded-xl flex items-center justify-center shadow-lg ring-1 ring-white/30 group-hover:scale-110 transition-transform">
                        <svg class="w-5 h-5 text-white" fill="none" stroke="currentColor" stroke-width="2.5" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M8.433 7.418c.155-.103.346-.196.567-.267v1.698a2.305 2.305 0 01-.567-.267C8.07 8.34 8 8.114 8 8c0-.114.07-.34.433-.582zM11 12.849v-1.698c.22.071.412.164.567.267.364.243.433.468.433.582 0 .114-.07.34-.433.582a2.305 2.305 0 01-.567.267z"/>
                            <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-13a1 1 0 10-2 0v.092a4.535 4.535 0 00-1.676.662C6.602 6.234 6 7.009 6 8c0 .99.602 1.765 1.324 2.246.48.32 1.054.545 1.676.662v1.941c-.391-.127-.68-.317-.843-.504a1 1 0 10-1.51 1.31c.562.649 1.413 1.076 2.353 1.253V15a1 1 0 102 0v-.092a4.535 4.535 0 001.676-.662C13.398 13.766 14 12.991 14 12c0-.99-.602-1.765-1.324-2.246A4.535 4.535 0 0011 9.092V7.151c.391.127.68.317.843.504a1 1 0 101.511-1.31c-.563-.649-1.413-1.076-2.354-1.253V5z" clip-rule="evenodd"/>
                        </svg>
                    </div>
                    <span class="text-sm font-semibold text-white">Prepaid System</span>
                </div>
                <svg class="w-5 h-5 text-white transition-transform duration-200" id="prepaid-arrow" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
                    <path d="M6 9l6 6 6-6"/>
                </svg>
            </button>
            <div class="menu-content hidden ml-4 mt-2 space-y-1" id="prepaid-menu" style="display: none; pointer-events: auto !important; z-index: 1004 !important;">
                <a class="flex items-center gap-3 px-3 py-2.5 rounded-lg text-white hover:bg-white/15 hover:text-white transition-all duration-200 <%= (typeof currentPath !== 'undefined' && currentPath === '/prepaid/dashboard') ? 'bg-white/15 text-white' : '' %>" href="/prepaid/dashboard">
                    <svg class="w-4 h-4 text-white" fill="none" stroke="currentColor" stroke-width="2.5" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round"><path d="M9 5l7 7-7 7"></path></svg>
                    <span class="text-sm">Dashboard Prepaid</span>
                </a>
                <a class="flex items-center gap-3 px-3 py-2.5 rounded-lg text-white hover:bg-white/15 hover:text-white transition-all duration-200 <%= (typeof currentPath !== 'undefined' && currentPath.startsWith('/prepaid/customers')) ? 'bg-white/15 text-white' : '' %>" href="/prepaid/customers">
                    <svg class="w-4 h-4 text-white" fill="none" stroke="currentColor" stroke-width="2.5" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round"><path d="M9 5l7 7-7 7"></path></svg>
                    <span class="text-sm">Customer Prepaid</span>
                </a>
                <a class="flex items-center gap-3 px-3 py-2.5 rounded-lg text-white hover:bg-white/15 hover:text-white transition-all duration-200 <%= (typeof currentPath !== 'undefined' && currentPath.startsWith('/prepaid/packages')) ? 'bg-white/15 text-white' : '' %>" href="/prepaid/packages">
                    <svg class="w-4 h-4 text-white" fill="none" stroke="currentColor" stroke-width="2.5" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round"><path d="M9 5l7 7-7 7"></path></svg>
                    <span class="text-sm">Paket Prepaid</span>
                </a>
                <a class="flex items-center gap-3 px-3 py-2.5 rounded-lg text-white hover:bg-white/15 hover:text-white transition-all duration-200 <%= (typeof currentPath !== 'undefined' && currentPath.startsWith('/prepaid/speed-profiles')) ? 'bg-white/15 text-white' : '' %>" href="/prepaid/speed-profiles">
                    <svg class="w-4 h-4 text-white" fill="none" stroke="currentColor" stroke-width="2.5" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round"><path d="M9 5l7 7-7 7"></path></svg>
                    <span class="text-sm">Speed Profiles</span>
                </a>
                <a class="flex items-center gap-3 px-3 py-2.5 rounded-lg text-white hover:bg-white/15 hover:text-white transition-all duration-200 <%= (typeof currentPath !== 'undefined' && currentPath === '/prepaid/mikrotik-setup') ? 'bg-white/15 text-white' : '' %>" href="/prepaid/mikrotik-setup">
                    <svg class="w-4 h-4 text-white" fill="none" stroke="currentColor" stroke-width="2.5" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round"><path d="M9 5l7 7-7 7"></path></svg>
                    <span class="text-sm">Mikrotik Setup</span>
                </a>
                <a class="flex items-center gap-3 px-3 py-2.5 rounded-lg text-white hover:bg-white/15 hover:text-white transition-all duration-200 <%= (typeof currentPath !== 'undefined' && currentPath.startsWith('/prepaid/address-list')) ? 'bg-white/15 text-white' : '' %>" href="/prepaid/address-list">
                    <svg class="w-4 h-4 text-white" fill="none" stroke="currentColor" stroke-width="2.5" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round"><path d="M9 5l7 7-7 7"></path></svg>
                    <span class="text-sm">Address List</span>
                </a>
                <a class="flex items-center gap-3 px-3 py-2.5 rounded-lg text-white hover:bg-white/15 hover:text-white transition-all duration-200 <%= (typeof currentPath !== 'undefined' && currentPath.startsWith('/prepaid/subscriptions')) ? 'bg-white/15 text-white' : '' %>" href="/prepaid/subscriptions">
                    <svg class="w-4 h-4 text-white" fill="none" stroke="currentColor" stroke-width="2.5" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round"><path d="M9 5l7 7-7 7"></path></svg>
                    <span class="text-sm">Active Subscriptions</span>
                </a>
                <a class="flex items-center gap-3 px-3 py-2.5 rounded-lg text-white hover:bg-white/15 hover:text-white transition-all duration-200 <%= (typeof currentPath !== 'undefined' && currentPath.startsWith('/prepaid/reports')) ? 'bg-white/15 text-white' : '' %>" href="/prepaid/reports">
                    <svg class="w-4 h-4 text-white" fill="none" stroke="currentColor" stroke-width="2.5" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round"><path d="M9 5l7 7-7 7"></path></svg>
                    <span class="text-sm">Laporan Prepaid</span>
                </a>
            </div>
        </div>

        <!-- Monitoring Section -->
        <div class="menu-group">
            <button type="button" class="menu-toggle w-full flex items-center justify-between px-4 py-3 rounded-xl text-white hover:bg-white/15 transition-all duration-200 group" data-menu="monitoring" style="pointer-events: auto !important; cursor: pointer !important;">
                <div class="flex items-center gap-3">
                    <div class="w-9 h-9 bg-gradient-to-br from-cyan-400 to-blue-500 rounded-xl flex items-center justify-center shadow-lg ring-1 ring-white/30 group-hover:scale-110 transition-transform">
                        <svg class="w-5 h-5 text-white" fill="none" stroke="currentColor" stroke-width="2.5" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M2 11a1 1 0 011-1h2a1 1 0 011 1v5a1 1 0 01-1 1H3a1 1 0 01-1-1v-5zM8 7a1 1 0 011-1h2a1 1 0 011 1v9a1 1 0 01-1 1H9a1 1 0 01-1-1V7zM14 4a1 1 0 011-1h2a1 1 0 011 1v12a1 1 0 01-1 1h-2a1 1 0 01-1-1V4z"/>
                        </svg>
                    </div>
                    <span class="text-sm font-semibold text-white">Monitoring</span>
                </div>
                <svg class="w-5 h-5 text-white transition-transform duration-200" id="monitoring-arrow" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
                    <path d="M6 9l6 6 6-6"/>
                </svg>
            </button>
            <div class="menu-content hidden ml-4 mt-2 space-y-1" id="monitoring-menu" style="display: none; pointer-events: auto !important; z-index: 1004 !important;">
                <a class="flex items-center gap-3 px-3 py-2.5 rounded-lg text-white hover:bg-white/15 hover:text-white transition-all duration-200 <%= (typeof currentPath !== 'undefined' && currentPath === '/monitoring/dashboard') ? 'bg-white/15 text-white' : '' %>" href="/monitoring/dashboard">
                    <svg class="w-4 h-4 text-white" fill="none" stroke="currentColor" stroke-width="2.5" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round"><path d="M9 5l7 7-7 7"></path></svg>
                    <span class="text-sm">Dashboard Monitor</span>
                </a>
                <a class="flex items-center gap-3 px-3 py-2.5 rounded-lg text-white hover:bg-white/15 hover:text-white transition-all duration-200 <%= (typeof currentPath !== 'undefined' && currentPath.startsWith('/monitoring/pppoe')) ? 'bg-white/15 text-white' : '' %>" href="/monitoring/pppoe">
                    <svg class="w-4 h-4 text-white" fill="none" stroke="currentColor" stroke-width="2.5" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round"><path d="M9 5l7 7-7 7"></path></svg>
                    <span class="text-sm">Monitor PPPoE</span>
                </a>
                <a class="flex items-center gap-3 px-3 py-2.5 rounded-lg text-white hover:bg-white/15 hover:text-white transition-all duration-200 <%= (typeof currentPath !== 'undefined' && currentPath.startsWith('/monitoring/static-ip')) ? 'bg-white/15 text-white' : '' %>" href="/monitoring/static-ip">
                    <svg class="w-4 h-4 text-white" fill="none" stroke="currentColor" stroke-width="2.5" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round"><path d="M9 5l7 7-7 7"></path></svg>
                    <span class="text-sm">Monitor Static IP</span>
                </a>
                <a class="flex items-center gap-3 px-3 py-2.5 rounded-lg text-white hover:bg-white/15 hover:text-white transition-all duration-200 <%= (typeof currentPath !== 'undefined' && currentPath.startsWith('/monitoring/sla')) ? 'bg-white/15 text-white' : '' %>" href="/monitoring/sla">
                    <svg class="w-4 h-4 text-white" fill="none" stroke="currentColor" stroke-width="2.5" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round"><path d="M9 5l7 7-7 7"></path></svg>
                    <span class="text-sm">SLA Monitoring</span>
                </a>
                <a class="flex items-center gap-3 px-3 py-2.5 rounded-lg text-white hover:bg-white/15 hover:text-white transition-all duration-200 <%= (typeof currentPath !== 'undefined' && currentPath.startsWith('/monitoring/maintenance')) ? 'bg-white/15 text-white' : '' %>" href="/monitoring/maintenance">
                    <svg class="w-4 h-4 text-white" fill="none" stroke="currentColor" stroke-width="2.5" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round"><path d="M9 5l7 7-7 7"></path></svg>
                    <span class="text-sm">Maintenance Schedule</span>
                </a>
            </div>
        </div>


        <!-- Pengaturan Section -->
        <div class="pt-4 mt-4 border-t border-white/20">
            <div class="text-xs font-semibold text-white uppercase tracking-wider mb-3 px-4">Pengaturan</div>
            <div class="menu-group">
                <button type="button" class="menu-toggle w-full flex items-center justify-between px-4 py-3 rounded-xl text-white hover:bg-white/15 transition-all duration-200 group" data-menu="settings" style="pointer-events: auto !important; cursor: pointer !important;">
                    <div class="flex items-center gap-3">
                        <div class="w-9 h-9 bg-gradient-to-br from-rose-400 to-pink-500 rounded-xl flex items-center justify-center shadow-lg ring-1 ring-white/30 group-hover:scale-110 transition-transform">
                        <svg class="w-5 h-5 text-white" fill="none" stroke="currentColor" stroke-width="2.5" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round">
                                <path fill-rule="evenodd" d="M11.49 3.17c-.38-1.56-2.6-1.56-2.98 0a1.532 1.532 0 01-2.286.948c-1.372-.836-2.942.734-2.106 2.106.54.886.061 2.042-.947 2.287-1.561.379-1.561 2.6 0 2.978a1.532 1.532 0 01.947 2.287c-.836 1.372.734 2.942 2.106 2.106a1.532 1.532 0 012.287.947c.379 1.561 2.6 1.561 2.978 0a1.533 1.533 0 012.287-.947c1.372.836 2.942-.734 2.106-2.106a1.533 1.533 0 01.947-2.287c1.561-.379 1.561-2.6 0-2.978a1.532 1.532 0 01-.947-2.287c.836-1.372-.734-2.942-2.106-2.106a1.532 1.532 0 01-2.287-.947zM10 13a3 3 0 100-6 3 3 0 000 6z" clip-rule="evenodd"/>
                            </svg>
                        </div>
                        <span class="text-sm font-semibold text-white">Pengaturan</span>
                    </div>
                    <svg class="w-5 h-5 text-white transition-transform duration-200" id="settings-arrow" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
                        <path d="M6 9l6 6 6-6"/>
                    </svg>
                </button>
                <div class="menu-content hidden ml-4 mt-2 space-y-1" id="settings-menu" style="display: none; pointer-events: auto !important; z-index: 1004 !important;">
                    <a class="flex items-center gap-3 px-3 py-2.5 rounded-lg text-white hover:bg-white/15 hover:text-white transition-all duration-200 <%= (typeof currentPath !== 'undefined' && currentPath.startsWith('/settings/company')) ? 'bg-white/15 text-white' : '' %>" href="/settings/company">
                        <svg class="w-4 h-4 text-white" fill="none" stroke="currentColor" stroke-width="2.5" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round"><path d="M9 5l7 7-7 7"></path></svg>
                        <span class="text-sm">Pengaturan Perusahaan</span>
                    </a>
                    <a class="flex items-center gap-3 px-3 py-2.5 rounded-lg text-white hover:bg-white/15 hover:text-white transition-all duration-200 <%= (typeof currentPath !== 'undefined' && currentPath.startsWith('/settings/mikrotik')) ? 'bg-white/15 text-white' : '' %>" href="/settings/mikrotik">
                        <svg class="w-4 h-4 text-white" fill="none" stroke="currentColor" stroke-width="2.5" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round"><path d="M9 5l7 7-7 7"></path></svg>
                        <span class="text-sm">MikroTik</span>
                    </a>
                    <a class="flex items-center gap-3 px-3 py-2.5 rounded-lg text-white hover:bg-white/15 hover:text-white transition-all duration-200 <%= (typeof currentPath !== 'undefined' && currentPath.startsWith('/settings/payment-gateway')) ? 'bg-white/15 text-white' : '' %>" href="/settings/payment-gateway">
                        <svg class="w-4 h-4 text-white" fill="none" stroke="currentColor" stroke-width="2.5" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round"><path d="M9 5l7 7-7 7"></path></svg>
                        <span class="text-sm">Payment Gateway</span>
                    </a>
                    <a class="flex items-center gap-3 px-3 py-2.5 rounded-lg text-white hover:bg-white/15 hover:text-white transition-all duration-200 <%= (typeof currentPath !== 'undefined' && currentPath.startsWith('/settings/ai')) ? 'bg-white/15 text-white' : '' %>" href="/settings/ai">
                        <svg class="w-4 h-4 text-white" fill="none" stroke="currentColor" stroke-width="2.5" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round"><path d="M9 5l7 7-7 7"></path></svg>
                        <span class="text-sm">AI Pembayaran (Gemini)</span>
                    </a>
                    <a class="flex items-center gap-3 px-3 py-2.5 rounded-lg text-white hover:bg-white/15 hover:text-white transition-all duration-200 <%= (typeof currentPath !== 'undefined' && currentPath.startsWith('/settings/whatsapp')) ? 'bg-white/15 text-white' : '' %>" href="/settings/whatsapp">
                        <svg class="w-4 h-4 text-white" fill="none" stroke="currentColor" stroke-width="2.5" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round"><path d="M9 5l7 7-7 7"></path></svg>
                        <span class="text-sm">WhatsApp Bisnis</span>
                    </a>
                    <a class="flex items-center gap-3 px-3 py-2.5 rounded-lg text-white hover:bg-white/15 hover:text-white transition-all duration-200 <%= (typeof currentPath !== 'undefined' && currentPath.startsWith('/whatsapp/troubleshooting')) ? 'bg-white/15 text-white' : '' %>" href="/whatsapp/troubleshooting">
                        <svg class="w-4 h-4 text-white" fill="none" stroke="currentColor" stroke-width="2.5" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round"><path d="M9 5l7 7-7 7"></path></svg>
                        <span class="text-sm">Troubleshooting WhatsApp</span>
                    </a>
                    <a class="flex items-center gap-3 px-3 py-2.5 rounded-lg text-white hover:bg-white/15 hover:text-white transition-all duration-200 <%= (typeof currentPath !== 'undefined' && currentPath.startsWith('/settings/users')) ? 'bg-white/15 text-white' : '' %>" href="/settings/users">
                        <svg class="w-4 h-4 text-white" fill="none" stroke="currentColor" stroke-width="2.5" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round"><path d="M9 5l7 7-7 7"></path></svg>
                        <span class="text-sm">User Management</span>
                    </a>
                    <a class="flex items-center gap-3 px-3 py-2.5 rounded-lg text-white hover:bg-white/15 hover:text-white transition-all duration-200 <%= (typeof currentPath !== 'undefined' && currentPath.startsWith('/kasir')) ? 'bg-white/15 text-white' : '' %>" href="/kasir/login">
                        <svg class="w-4 h-4 text-white" fill="none" stroke="currentColor" stroke-width="2.5" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round"><path d="M9 5l7 7-7 7"></path></svg>
                        <span class="text-sm">Kasir Login</span>
                    </a>
                    <a class="flex items-center gap-3 px-3 py-2.5 rounded-lg text-white hover:bg-white/15 hover:text-white transition-all duration-200 <%= (typeof currentPath !== 'undefined' && currentPath.startsWith('/database/management')) ? 'bg-white/15 text-white' : '' %>" href="/database/management">
                        <svg class="w-4 h-4 text-white" fill="none" stroke="currentColor" stroke-width="2.5" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round"><path d="M9 5l7 7-7 7"></path></svg>
                        <span class="text-sm">Database Management</span>
                    </a>
                    <a class="flex items-center gap-3 px-3 py-2.5 rounded-lg text-white hover:bg-white/15 hover:text-white transition-all duration-200 <%= (typeof currentPath !== 'undefined' && currentPath.startsWith('/backup')) ? 'bg-white/15 text-white' : '' %>" href="/backup">
                        <svg class="w-4 h-4 text-white" fill="none" stroke="currentColor" stroke-width="2.5" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round"><path d="M9 5l7 7-7 7"></path></svg>
                        <span class="text-sm">Backup & Restore</span>
                    </a>
                </div>
            </div>
        </div>

        <!-- About Section -->
        <div class="mt-2">
            <a class="flex items-center gap-3 px-4 py-3 rounded-xl text-white hover:bg-white/10 transition-all duration-200 <%= (typeof currentPath !== 'undefined' && currentPath.startsWith('/about')) ? 'bg-white/15 text-white' : '' %>" href="/about">
                <div class="w-9 h-9 bg-gradient-to-br from-cyan-400 to-blue-500 rounded-xl flex items-center justify-center shadow-lg ring-1 ring-white/30 hover:scale-110 transition-transform">
                        <svg class="w-5 h-5 text-white" fill="none" stroke="currentColor" stroke-width="2.5" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round">
                        <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"/>
                    </svg>
                </div>
                <span class="text-sm font-semibold text-white">Tentang Aplikasi</span>
            </a>
        </div>

        <!-- Logout Section -->
        <div class="mt-2">
            <a class="flex items-center gap-3 px-4 py-3 rounded-xl text-white hover:bg-red-500/20 hover:text-red-100 transition-all duration-200" href="/logout">
                <div class="w-9 h-9 bg-gradient-to-br from-red-400 to-red-600 rounded-xl flex items-center justify-center shadow-lg ring-1 ring-white/30 hover:scale-110 transition-transform">
                        <svg class="w-5 h-5 text-white" fill="none" stroke="currentColor" stroke-width="2.5" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round">
                        <path fill-rule="evenodd" d="M3 3a1 1 0 00-1 1v12a1 1 0 102 0V4a1 1 0 00-1-1zm10.293 9.293a1 1 0 001.414 1.414l3-3a1 1 0 000-1.414l-3-3a1 1 0 10-1.414 1.414L14.586 9H7a1 1 0 100 2h7.586l-1.293 1.293z" clip-rule="evenodd"/>
                    </svg>
                </div>
                <span class="text-sm font-semibold text-white">Logout</span>
            </a>
        </div>
    </nav>
</div>

<!-- Inline script to ensure menu buttons work immediately -->
<script>
(function() {
    // Wait for DOM to be ready
    function initMenuButtons() {
        try {
            const menuButtons = document.querySelectorAll('.menu-toggle[data-menu]');
            menuButtons.forEach(function(button) {
                // Remove any existing onclick
                if (button.hasAttribute('onclick')) {
                    button.removeAttribute('onclick');
                }
                
                // Remove any existing event listeners by cloning
                const newButton = button.cloneNode(true);
                button.parentNode.replaceChild(newButton, button);
                
                // Add click event listener to new button
                newButton.addEventListener('click', function(e) {
                    e.preventDefault();
                    e.stopPropagation();
                    e.stopImmediatePropagation();
                    
                    const menuName = newButton.getAttribute('data-menu');
                    if (!menuName) return false;
                    
                    // Use toggleMenu if available, otherwise use inline logic
                    if (typeof window.toggleMenu === 'function') {
                        window.toggleMenu(menuName, e);
                    } else {
                        // Fallback inline toggle logic
                        const menuContent = document.getElementById(menuName + '-menu');
                        const arrow = document.getElementById(menuName + '-arrow');
                        if (menuContent && arrow) {
                            const isHidden = menuContent.style.display === 'none' || 
                                             menuContent.classList.contains('hidden');
                            if (isHidden) {
                                menuContent.style.display = 'block';
                                menuContent.classList.remove('hidden');
                                arrow.style.transform = 'rotate(180deg)';
                            } else {
                                menuContent.style.display = 'none';
                                menuContent.classList.add('hidden');
                                arrow.style.transform = 'rotate(0deg)';
                            }
                        }
                    }
                    return false;
                }, true);
            });
            console.log('✅ Menu buttons initialized:', menuButtons.length);
        } catch(e) {
            console.error('Error initializing menu buttons:', e);
        }
    }
    
    if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', initMenuButtons);
    } else {
        initMenuButtons();
    }
    
    // Also run after delays to catch late-loading elements
    setTimeout(initMenuButtons, 50);
    setTimeout(initMenuButtons, 100);
    setTimeout(initMenuButtons, 300);
})();
</script>


