<div class="rounded border border-slate-200 bg-white p-6">
    <div class="flex items-center justify-between mb-6">
        <h2 class="text-2xl font-bold text-slate-800">About Aplikasi</h2>
        <div class="flex gap-2">
            <button onclick="checkForUpdates()" class="px-4 py-2 rounded bg-blue-600 text-white hover:bg-blue-700">
                Cek Update
            </button>
        </div>
    </div>

    <% if (success && success.length > 0) { %>
    <div class="mb-4 p-3 bg-green-100 border border-green-300 text-green-700 rounded">
        <%= success[0] %>
    </div>
    <% } %>

    <% if (error && error.length > 0) { %>
    <div class="mb-4 p-3 bg-red-100 border border-red-300 text-red-700 rounded">
        <%= error[0] %>
    </div>
    <% } %>

    <!-- Version Info -->
    <div class="mb-8 p-4 bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-200 rounded-lg">
        <h3 class="text-lg font-semibold text-slate-800 mb-3">üìã Informasi Versi</h3>
        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
            <div>
                <label class="block text-sm font-medium text-slate-600">Versi Saat Ini</label>
                <p class="text-lg font-bold text-blue-600"><%= version.current %></p>
            </div>
            <div>
                <label class="block text-sm font-medium text-slate-600">Versi Terbaru</label>
                <p class="text-lg font-bold text-green-600"><%= version.latest %></p>
            </div>
            <div>
                <label class="block text-sm font-medium text-slate-600">Tanggal Release</label>
                <p class="text-sm text-slate-700"><%= new Date(version.releaseDate).toLocaleDateString('id-ID') %></p>
            </div>
        </div>
    </div>

    <!-- Update Settings -->
    <div class="mb-8 p-4 bg-slate-50 border border-slate-200 rounded-lg">
        <h3 class="text-lg font-semibold text-slate-800 mb-4">‚öôÔ∏è Pengaturan Update</h3>
        <form method="post" action="/about/update-settings" class="space-y-4">
            <div class="flex items-center gap-4">
                <label class="flex items-center gap-2">
                    <input type="checkbox" name="autoUpdate" <%= updateSettings.autoUpdate ? 'checked' : '' %> class="rounded">
                    <span class="text-sm font-medium">Auto Update</span>
                </label>
                <select name="updateChannel" class="px-3 py-1 border border-slate-300 rounded text-sm">
                    <option value="stable" <%= updateSettings.updateChannel === 'stable' ? 'selected' : '' %>>Stable</option>
                    <option value="beta" <%= updateSettings.updateChannel === 'beta' ? 'selected' : '' %>>Beta</option>
                    <option value="dev" <%= updateSettings.updateChannel === 'dev' ? 'selected' : '' %>>Development</option>
                </select>
                <button type="submit" class="px-3 py-1 bg-blue-600 text-white rounded text-sm hover:bg-blue-700">
                    Simpan
                </button>
            </div>
        </form>
    </div>

    <!-- Features -->
    <div class="mb-8">
        <h3 class="text-lg font-semibold text-slate-800 mb-4">üöÄ Fitur Aplikasi</h3>
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
            <% features.forEach(function(feature) { %>
            <div class="p-4 border border-slate-200 rounded-lg hover:shadow-md transition-shadow">
                <div class="flex items-start justify-between mb-2">
                    <h4 class="font-semibold text-slate-800"><%= feature.name %></h4>
                    <span class="px-2 py-1 text-xs rounded <%= feature.status === 'active' ? 'bg-green-100 text-green-700' : feature.status === 'beta' ? 'bg-yellow-100 text-yellow-700' : 'bg-red-100 text-red-700' %>">
                        <%= feature.status === 'active' ? 'Aktif' : feature.status === 'beta' ? 'Beta' : 'Deprecated' %>
                    </span>
                </div>
                <p class="text-sm text-slate-600 mb-2"><%= feature.description %></p>
                <div class="flex items-center justify-between">
                    <span class="text-xs text-slate-500">v<%= feature.version %></span>
                    <span class="text-xs px-2 py-1 rounded bg-slate-100 text-slate-600">
                        <%= feature.category === 'billing' ? 'Billing' : feature.category === 'network' ? 'Network' : feature.category === 'monitoring' ? 'Monitoring' : 'System' %>
                    </span>
                </div>
            </div>
            <% }) %>
        </div>
    </div>

    <!-- Changelog -->
    <div class="mb-8">
        <h3 class="text-lg font-semibold text-slate-800 mb-4">üìù Changelog</h3>
        <div class="bg-slate-50 border border-slate-200 rounded-lg p-4">
            <ul class="space-y-2">
                <% version.changelog.forEach(function(change) { %>
                <li class="text-sm text-slate-700 flex items-start gap-2">
                    <span class="text-blue-500 mt-1">‚Ä¢</span>
                    <span><%= change %></span>
                </li>
                <% }) %>
            </ul>
        </div>
    </div>
</div>

<script>
async function checkForUpdates() {
    try {
        const response = await fetch('/about/check-updates');
        const data = await response.json();
        
        if (data.available) {
            if (confirm(`Update tersedia! Versi ${data.version}. Update sekarang?`)) {
                const form = document.createElement('form');
                form.method = 'POST';
                form.action = '/about/update';
                
                const versionInput = document.createElement('input');
                versionInput.type = 'hidden';
                versionInput.name = 'version';
                versionInput.value = data.version;
                
                form.appendChild(versionInput);
                document.body.appendChild(form);
                form.submit();
            }
        } else {
            alert('Aplikasi sudah menggunakan versi terbaru.');
        }
    } catch (error) {
        alert('Gagal mengecek update: ' + error.message);
    }
}
</script>
