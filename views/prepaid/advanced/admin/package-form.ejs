<%- include('../../../layouts/admin-layout', { title: title }) %>

<div class="container mx-auto px-4 py-8 max-w-4xl">
  <div class="mb-6">
    <h1 class="text-3xl font-bold text-gray-800"><%= mode === 'create' ? 'Create New Package' : 'Edit Package' %></h1>
    <p class="text-gray-600 mt-2">Configure package details</p>
  </div>

  <form method="POST" action="<%= mode === 'create' ? '/prepaid/advanced/admin/packages/create' : `/prepaid/advanced/admin/packages/update/${package?.id}` %>" class="bg-white rounded-lg shadow p-6">
    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
      <!-- Basic Info -->
      <div class="md:col-span-2">
        <h3 class="text-lg font-semibold text-gray-800 mb-4 border-b pb-2">Basic Information</h3>
      </div>

      <div>
        <label class="block text-sm font-medium text-gray-700 mb-2">Package Name *</label>
        <input type="text" name="name" required value="<%= package?.name || '' %>" class="w-full border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500">
      </div>

      <div>
        <label class="block text-sm font-medium text-gray-700 mb-2">Package Code</label>
        <input type="text" name="package_code" value="<%= package?.package_code || '' %>" class="w-full border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500">
        <p class="text-xs text-gray-500 mt-1">Auto-generated if empty</p>
      </div>

      <div class="md:col-span-2">
        <label class="block text-sm font-medium text-gray-700 mb-2">Description</label>
        <textarea name="description" rows="3" class="w-full border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"><%= package?.description || '' %></textarea>
      </div>

      <div>
        <label class="block text-sm font-medium text-gray-700 mb-2">Package Type *</label>
        <select name="package_type" required class="w-full border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500">
          <option value="basic" <%= package?.package_type === 'basic' ? 'selected' : '' %>>Basic</option>
          <option value="premium" <%= package?.package_type === 'premium' ? 'selected' : '' %>>Premium</option>
          <option value="vip" <%= package?.package_type === 'vip' ? 'selected' : '' %>>VIP</option>
          <option value="unlimited" <%= package?.package_type === 'unlimited' ? 'selected' : '' %>>Unlimited</option>
        </select>
      </div>

      <div>
        <label class="block text-sm font-medium text-gray-700 mb-2">Tier Level</label>
        <input type="number" name="tier_level" value="<%= package?.tier_level || 1 %>" min="1" max="5" class="w-full border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500">
      </div>

      <div>
        <label class="block text-sm font-medium text-gray-700 mb-2">Connection Type *</label>
        <select name="connection_type" required class="w-full border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500">
          <option value="pppoe" <%= package?.connection_type === 'pppoe' ? 'selected' : '' %>>PPPoE</option>
          <option value="static_ip" <%= package?.connection_type === 'static_ip' ? 'selected' : '' %>>Static IP</option>
          <option value="both" <%= package?.connection_type === 'both' ? 'selected' : '' %>>Both</option>
        </select>
      </div>

      <!-- Speed Configuration -->
      <div class="md:col-span-2 mt-4">
        <h3 class="text-lg font-semibold text-gray-800 mb-4 border-b pb-2">Speed Configuration</h3>
      </div>

      <div>
        <label class="block text-sm font-medium text-gray-700 mb-2">Download Speed (Mbps) *</label>
        <input type="number" name="download_mbps" required value="<%= package?.download_mbps || 0 %>" step="0.01" class="w-full border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500">
      </div>

      <div>
        <label class="block text-sm font-medium text-gray-700 mb-2">Upload Speed (Mbps) *</label>
        <input type="number" name="upload_mbps" required value="<%= package?.upload_mbps || 0 %>" step="0.01" class="w-full border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500">
      </div>

      <!-- Pricing -->
      <div class="md:col-span-2 mt-4">
        <h3 class="text-lg font-semibold text-gray-800 mb-4 border-b pb-2">Pricing</h3>
      </div>

      <div>
        <label class="block text-sm font-medium text-gray-700 mb-2">Base Price (Rp) *</label>
        <input type="number" name="base_price" required value="<%= package?.base_price || 0 %>" step="0.01" class="w-full border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500">
      </div>

      <div>
        <label class="block text-sm font-medium text-gray-700 mb-2">Discount Price (Rp)</label>
        <input type="number" name="discount_price" value="<%= package?.discount_price || '' %>" step="0.01" class="w-full border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500">
      </div>

      <div>
        <label class="block text-sm font-medium text-gray-700 mb-2">Promo Price (Rp)</label>
        <input type="number" name="promo_price" value="<%= package?.promo_price || '' %>" step="0.01" class="w-full border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500">
      </div>

      <!-- Duration -->
      <div class="md:col-span-2 mt-4">
        <h3 class="text-lg font-semibold text-gray-800 mb-4 border-b pb-2">Duration</h3>
      </div>

      <div>
        <label class="block text-sm font-medium text-gray-700 mb-2">Duration (Days) *</label>
        <input type="number" name="duration_days" required value="<%= package?.duration_days || 30 %>" class="w-full border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500">
      </div>

      <div>
        <label class="block text-sm font-medium text-gray-700 mb-2">Duration (Hours)</label>
        <input type="number" name="duration_hours" value="<%= package?.duration_hours || 0 %>" class="w-full border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500">
      </div>

      <!-- Quota -->
      <div class="md:col-span-2 mt-4">
        <h3 class="text-lg font-semibold text-gray-800 mb-4 border-b pb-2">Data Quota</h3>
      </div>

      <div>
        <label class="block text-sm font-medium text-gray-700 mb-2">Data Quota (GB)</label>
        <input type="number" name="data_quota_gb" value="<%= package?.data_quota_gb || '' %>" step="0.01" class="w-full border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500">
        <p class="text-xs text-gray-500 mt-1">Leave empty for unlimited</p>
      </div>

      <div>
        <label class="block text-sm font-medium text-gray-700 mb-2">Quota Type</label>
        <select name="data_quota_type" class="w-full border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500">
          <option value="none" <%= package?.data_quota_type === 'none' ? 'selected' : '' %>>None</option>
          <option value="download" <%= package?.data_quota_type === 'download' ? 'selected' : '' %>>Download Only</option>
          <option value="upload" <%= package?.data_quota_type === 'upload' ? 'selected' : '' %>>Upload Only</option>
          <option value="total" <%= package?.data_quota_type === 'total' ? 'selected' : '' %>>Total</option>
        </select>
      </div>

      <!-- Status & Flags -->
      <div class="md:col-span-2 mt-4">
        <h3 class="text-lg font-semibold text-gray-800 mb-4 border-b pb-2">Status & Flags</h3>
      </div>

      <div class="space-y-3">
        <label class="flex items-center">
          <input type="checkbox" name="is_active" value="1" <%= package?.is_active !== false ? 'checked' : '' %> class="mr-2">
          <span class="text-gray-700">Active</span>
        </label>
        <label class="flex items-center">
          <input type="checkbox" name="is_featured" value="1" <%= package?.is_featured ? 'checked' : '' %> class="mr-2">
          <span class="text-gray-700">Featured</span>
        </label>
        <label class="flex items-center">
          <input type="checkbox" name="is_popular" value="1" <%= package?.is_popular ? 'checked' : '' %> class="mr-2">
          <span class="text-gray-700">Popular</span>
        </label>
        <label class="flex items-center">
          <input type="checkbox" name="auto_renew_enabled" value="1" <%= package?.auto_renew_enabled ? 'checked' : '' %> class="mr-2">
          <span class="text-gray-700">Enable Auto-Renewal</span>
        </label>
      </div>
    </div>

    <!-- Submit Buttons -->
    <div class="mt-8 flex justify-end space-x-4">
      <a href="/prepaid/advanced/admin/packages" class="px-6 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50">
        Cancel
      </a>
      <button type="submit" class="px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-semibold">
        <%= mode === 'create' ? 'Create Package' : 'Update Package' %>
      </button>
    </div>
  </form>
</div>

<%- include('../../../layouts/admin-layout-footer') %>




