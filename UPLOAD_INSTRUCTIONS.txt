# Database Backup for Ubuntu Server Upload

## Backup Files Created

Successfully created the following backup files in the `backups/` directory:

1. `billing_full_backup_2026-01-19_08-13-28.sql` (~117 MB)
   - Full database backup with structure and data
   - Contains all tables, records, stored procedures, triggers, and events

## File Sizes
- SQL File: ~117 MB (120,409,100 bytes)
- This is a complete backup of your billing database

## Upload Instructions for Ubuntu Server

### Method 1: Using SCP (Secure Copy)
From your Windows machine, use a terminal or WinSCP:

```bash
# Upload the backup file to your Ubuntu server
scp c:\laragon\www\billing\backups\billing_full_backup_2026-01-19_08-13-28.sql username@your-ubuntu-server-ip:/home/username/

# SSH into your Ubuntu server
ssh username@your-ubuntu-server-ip

# Import the database backup
mysql -u root -p billing < billing_full_backup_2026-01-19_08-13-28.sql
```

### Method 2: Using WinSCP (GUI Method)
1. Open WinSCP
2. Connect to your Ubuntu server
3. Navigate to the `c:\laragon\www\billing\backups\` folder on your local machine
4. Drag and drop the `.sql` file to your home directory on the Ubuntu server
5. SSH into your server and run the import command

### Method 3: Using FTP/SFTP
1. Use an FTP client like FileZilla
2. Connect to your Ubuntu server via SFTP
3. Upload the backup file to your server
4. SSH into your server and run the import command

## Ubuntu Server Commands

After uploading the backup file to your Ubuntu server:

```bash
# Make sure MySQL service is running
sudo systemctl status mysql

# Import the database backup
mysql -u root -p billing < billing_full_backup_2026-01-19_08-13-28.sql

# Or if the database doesn't exist yet:
mysql -u root -p -e "CREATE DATABASE billing;"
mysql -u root -p billing < billing_full_backup_2026-01-19_08-13-28.sql
```

## Post-Import Steps on Ubuntu Server

After importing the database:

1. Update your `.env` file with correct database credentials
2. Restart your Node.js application
3. Verify the application connects to the database properly

```bash
# Navigate to your application directory
cd /path/to/your/billing/app

# Update .env file with correct settings
nano .env

# Install dependencies if needed
npm install

# Restart the application
pm2 restart billing-app
# or
pm2 start ecosystem.config.js
```

## Verification

To verify the import was successful:

```sql
-- Connect to MySQL
mysql -u root -p

-- Check the database exists
SHOW DATABASES;

-- Check tables in the billing database
USE billing;
SHOW TABLES;

-- Count some important tables to verify data
SELECT COUNT(*) FROM customers;
SELECT COUNT(*) FROM invoices;
SELECT COUNT(*) FROM users;
```

## Important Notes

- The backup includes all data from your current billing system
- Make sure you have sufficient disk space on your Ubuntu server (at least 2x the backup size)
- Consider backing up your existing production database before importing
- The imported database will replace all existing data in the billing database
- After import, you may need to adjust user permissions or other server-specific settings

## Troubleshooting

If you encounter issues:

1. **MySQL Access Denied**: Make sure you're using the correct MySQL root password
2. **Database doesn't exist**: Create the database first: `CREATE DATABASE billing;`
3. **Large file timeout**: Increase MySQL timeouts:
   ```sql
   SET GLOBAL max_allowed_packet=1073741824;  -- 1GB
   SET GLOBAL net_write_timeout=600;
   SET GLOBAL net_read_timeout=600;
   ```
4. **Disk space issues**: Check available space with `df -h`